require=function c(s,a,r){function p(o,t){if(!a[o]){if(!s[o]){var e="function"==typeof require&&require;if(!t&&e)return e(o,!0);if(l)return l(o,!0);var n=new Error("Cannot find module '"+o+"'");throw n.code="MODULE_NOT_FOUND",n}var i=a[o]={exports:{}};s[o][0].call(i.exports,function(t){var e=s[o][1][t];return p(e||t)},i,i.exports,c,s,a,r)}return a[o].exports}for(var l="function"==typeof require&&require,t=0;t<r.length;t++)p(r[t]);return p}({JoystickBG:[function(t,e,o){"use strict";cc._RF.push(e,"a0ce7WST1RFf7Sj+l6jGZ6V","JoystickBG");var n=t("JoystickCommon");cc.Class({extends:cc.Component,properties:{dot:{default:null,type:cc.Node,displayName:"摇杆节点"},_joyCom:{default:null,displayName:"joy Node"},_playerNode:{default:null,displayName:"被操作的目标Node"},_angle:{default:null,displayName:"当前触摸的角度"},_radian:{default:null,displayName:"弧度"},speed:{default:0,displayName:"Move Speed"},speed1:{default:1,displayName:"一级速度"},speed2:{default:2,displayName:"二级速度"},opacity:{default:255,displayName:"opacity"}},onLoad:function(){this.node.opacity=this.opacity,this._joyCom=this.node.parent.getComponent("Joystick"),this._playerNode=this._joyCom.sprite,this._joyCom.touchType==n.TouchType.DEFAULT&&this._initTouchEvent()},_initTouchEvent:function(){var t=this;t.node.on(cc.Node.EventType.TOUCH_START,this._touchStartEvent,t),t.node.on(cc.Node.EventType.TOUCH_MOVE,this._touchMoveEvent,t),t.node.on(cc.Node.EventType.TOUCH_END,this._touchEndEvent,t),t.node.on(cc.Node.EventType.TOUCH_CANCEL,this._touchEndEvent,t)},update:function(t){switch(this._joyCom.directionType){case n.DirectionType.ALL:this._allDirectionsMove()}},_allDirectionsMove:function(){this._playerNode.x+=Math.cos(this._angle*(Math.PI/180))*this.speed,this._playerNode.y+=Math.sin(this._angle*(Math.PI/180))*this.speed},_getDistance:function(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},_getRadian:function(t){return this._radian=Math.PI/180*this._getAngle(t),this._radian},_getAngle:function(t){var e=this.node.getPosition();return this._angle=Math.atan2(t.y-e.y,t.x-e.x)*(180/Math.PI),this._angle},_setSpeed:function(t){var e=this._getDistance(t,this.node.getPosition());this.radius=this.node.width/2,console.log("radius:"+this.radius),e<this.radius?this.speed=this.speed1:this.speed=this.speed2},_touchStartEvent:function(t){var e=this.node.convertToNodeSpaceAR(t.getLocation()),o=this._getDistance(e,cc.p(0,0)),n=this.node.width/2;this._stickPos=e;var i=this.node.getPosition().x+e.x,c=this.node.getPosition().y+e.y;return o<n&&(this.dot.setPosition(cc.p(i,c)),!0)},_touchMoveEvent:function(t){var e=this.node.convertToNodeSpaceAR(t.getLocation()),o=this._getDistance(e,cc.p(0,0)),n=this.node.width/2,i=this.node.getPosition().x+e.x,c=this.node.getPosition().y+e.y;if(o<n)this.dot.setPosition(cc.p(i,c));else{var s=this.node.getPosition().x+Math.cos(this._getRadian(cc.p(i,c)))*n,a=this.node.getPosition().y+Math.sin(this._getRadian(cc.p(i,c)))*n;this.dot.setPosition(cc.p(s,a))}this._getAngle(cc.p(i,c)),this._setSpeed(cc.p(i,c))},_touchEndEvent:function(){this.dot.setPosition(this.node.getPosition()),this.speed=0}}),cc._RF.pop()},{JoystickCommon:"JoystickCommon"}],JoystickCommon:[function(t,e,o){"use strict";cc._RF.push(e,"7e230VOCwtGvYBEdKGvM2XS","JoystickCommon"),e.exports={TouchType:cc.Enum({DEFAULT:0,FOLLOW:1}),DirectionType:cc.Enum({FOUR:4,EIGHT:8,ALL:0})},cc._RF.pop()},{}],Joystick:[function(t,e,o){"use strict";cc._RF.push(e,"aab48BGt3tCj4s1/vilD88M","Joystick");var n=t("./JoystickCommon"),i=t("./JoystickBG");cc.Class({extends:cc.Component,properties:{dot:{default:null,type:cc.Node,displayName:"摇杆节点"},dot_opacity:{default:255,displayName:"dot_opacity"},ring:{default:null,type:i,displayName:"摇杆背景节点"},ring_opacity:{default:255,displayName:"ring_opacity"},stickX:{default:0,displayName:"摇杆 X 位置"},stickY:{default:0,displayName:"摇杆 Y 位置"},touchType:{default:n.TouchType.DEFAULT,type:n.TouchType,displayName:"触摸类型"},directionType:{default:n.DirectionType.ALL,type:n.DirectionType,displayName:"方向类型"},sprite:{default:null,type:cc.Node,displayName:"操控的目标"},_stickPos:{default:null,type:cc.Node,displayName:"摇杆当前位置"},_touchLocation:{default:null,type:cc.Node,displayName:"摇杆当前位置"}},onLoad:function(){this._createStickSprite(),this.touchType==n.TouchType.FOLLOW&&this._initTouchEvent()},_createStickSprite:function(){this.ring.node.setPosition(this.stickX,this.stickY),this.dot.setPosition(this.stickX,this.stickY),this.ring.opacity=this.ring_opacity,this.dot.opacity=this.dot_opacity},_initTouchEvent:function(){var t=this;t.node.on(cc.Node.EventType.TOUCH_START,t._touchStartEvent,t),t.node.on(cc.Node.EventType.TOUCH_MOVE,t._touchMoveEvent,t),t.node.on(cc.Node.EventType.TOUCH_END,t._touchEndEvent,t),t.node.on(cc.Node.EventType.TOUCH_CANCEL,t._touchEndEvent,t)},_touchStartEvent:function(t){this._touchLocation=t.getLocation();var e=this.node.convertToNodeSpaceAR(t.getLocation());this.ring.node.setPosition(e),this.dot.setPosition(e),this._stickPos=e},_touchMoveEvent:function(t){if(this._touchLocation.x==t.getLocation().x&&this._touchLocation.y==t.getLocation().y)return!1;var e=this.ring.node.convertToNodeSpaceAR(t.getLocation()),o=this.ring._getDistance(e,cc.p(0,0)),n=this.ring.node.width/2,i=this._stickPos.x+e.x,c=this._stickPos.y+e.y;if(o<n)this.dot.setPosition(cc.p(i,c));else{var s=this._stickPos.x+Math.cos(this.ring._getRadian(cc.p(i,c)))*n,a=this._stickPos.y+Math.sin(this.ring._getRadian(cc.p(i,c)))*n;this.dot.setPosition(cc.p(s,a))}this.ring._getAngle(cc.p(i,c)),this.ring._setSpeed(cc.p(i,c))},_touchEndEvent:function(){this.dot.setPosition(this.ring.node.getPosition()),this.ring._speed=0}}),cc._RF.pop()},{"./JoystickBG":"JoystickBG","./JoystickCommon":"JoystickCommon"}],LanguageData:[function(t,e,o){"use strict";cc._RF.push(e,"61de062n4dJ7ZM9/Xdumozn","LanguageData");var n=t("polyglot.min"),i=null;function c(t){return window.i18n.languages[t]}function s(t){t&&(i?i.replace(t):i=new n({phrases:t,allowMissing:!0}))}window.i18n||(window.i18n={languages:{},curLang:""}),e.exports={init:function(t){if(t!==window.i18n.curLang){var e=c(t)||{};window.i18n.curLang=t,s(e),this.inst=i}},t:function(t,e){if(i)return i.t(t,e)},inst:i,updateSceneRenderers:function(){for(var t=cc.director.getScene().children,e=[],o=0;o<t.length;++o){var n=t[o].getComponentsInChildren("LocalizedLabel");Array.prototype.push.apply(e,n)}for(var i=0;i<e.length;++i){e[i].updateLabel()}for(var c=[],s=0;s<t.length;++s){var a=t[s].getComponentsInChildren("LocalizedSprite");Array.prototype.push.apply(c,a)}for(var r=0;r<c.length;++r){c[r].updateSprite(window.i18n.curLang)}}},cc._RF.pop()},{"polyglot.min":"polyglot.min"}],LocalizedLabel:[function(t,e,o){"use strict";cc._RF.push(e,"744dcs4DCdNprNhG0xwq6FK","LocalizedLabel");var n=t("LanguageData");cc.Class({extends:cc.Component,editor:{executeInEditMode:!0,menu:"i18n/LocalizedLabel"},properties:{dataID:{get:function(){return this._dataID},set:function(t){this._dataID!==t&&(this._dataID=t,this.updateLabel())}},_dataID:""},onLoad:function(){n.inst||n.init(),this.fetchRender()},fetchRender:function(){var t=this.getComponent(cc.Label);if(t)return this.label=t,void this.updateLabel()},updateLabel:function(){this.label?n.t(this.dataID)&&(this.label.string=n.t(this.dataID)):cc.error("Failed to update localized label, label component is invalid!")}}),cc._RF.pop()},{LanguageData:"LanguageData"}],LocalizedSprite:[function(t,e,o){"use strict";cc._RF.push(e,"f34ac2GGiVOBbG6XlfvgYP4","LocalizedSprite");var n=t("SpriteFrameSet");cc.Class({extends:cc.Component,editor:{executeInEditMode:!0,inspector:"packages://i18n/inspector/localized-sprite.js",menu:"i18n/LocalizedSprite"},properties:{spriteFrameSet:{default:[],type:n}},onLoad:function(){this.fetchRender()},fetchRender:function(){var t=this.getComponent(cc.Sprite);if(t)return this.sprite=t,void this.updateSprite(window.i18n.curLang)},getSpriteFrameByLang:function(t){for(var e=0;e<this.spriteFrameSet.length;++e)if(this.spriteFrameSet[e].language===t)return this.spriteFrameSet[e].spriteFrame},updateSprite:function(t){if(this.sprite){var e=this.getSpriteFrameByLang(t);!e&&this.spriteFrameSet[0]&&(e=this.spriteFrameSet[0].spriteFrame),this.sprite.spriteFrame=e}else cc.error("Failed to update localized sprite, sprite component is invalid!")}}),cc._RF.pop()},{SpriteFrameSet:"SpriteFrameSet"}],SpriteFrameSet:[function(t,e,o){"use strict";cc._RF.push(e,"97019Q80jpE2Yfz4zbuCZBq","SpriteFrameSet");var n=cc.Class({name:"SpriteFrameSet",properties:{language:"",spriteFrame:cc.SpriteFrame}});e.exports=n,cc._RF.pop()},{}],bulletGroup:[function(t,e,o){"use strict";cc._RF.push(e,"c6b5dm2gcBO4aDTJ3kweMLw","bulletGroup");var n=cc.Class({name:"bPosition",properties:{xAxis:{default:"",tooltip:"初始x轴，相对 Player"},yAxis:{default:"",tooltip:"初始y轴，相对 Player"}}}),i=cc.Class({name:"bulletInfinite",properties:{name:"",freqTime:0,initPollCount:0,prefab:cc.Prefab,position:{default:[],type:n,tooltip:"每次多少排子弹"}}}),c=cc.Class({name:"bulletFinite",extends:i,properties:{finiteTime:0,orginName:""}});cc.Class({extends:cc.Component,properties:{bulletInfinite:{default:null,type:i,tooltip:"无限时长子弹组"},bulletFinite:{default:[],type:c,tooltip:"有限时长子弹组"},player:cc.Node},onLoad:function(){this.eState=D.commonInfo.gameState.none,D.common.initObjPool(this,this.bulletInfinite),D.common.batchInitObjPool(this,this.bulletFinite)},start:function(){}}),cc._RF.pop()},{}],common:[function(t,e,o){"use strict";cc._RF.push(e,"381cfiH+jtH+IyTA1pfsFyL","common");var n=cc.Enum({none:0,start:1,stop:2}),i=cc.Class({extends:cc.Component,properties:{},statics:{gameState:n},onLoad:function(){D.commonInfo=i,D.common=this},start:function(){},batchInitObjPool:function(t,e){for(var o=0;o<e.length;o++){var n=e[o];this.initObjPool(t,n)}},initObjPool:function(t,e){var o=e.name+"Pool";t[o]=new cc.NodePool;for(var n=e.initPollCount,i=0;i<n;i++){var c=cc.instantiate(e.prefab);t[o].put(c)}},genNewNode:function(t,e,o){var n=null;return n=0<t.size()?t.get():cc.instantiate(e),o.addChild(n),n}});cc._RF.pop()},{}],control:[function(t,e,o){"use strict";cc._RF.push(e,"e4a27+g379LP5Pxdic+/uU7","control"),cc.Class({extends:cc.Component,properties:{canvas:cc.Node,player:{default:null,type:cc.Node},touchLocationDisplay:{default:null,type:cc.Label},isMoving:!1,enableGravity:!1,moveToPos:cc.Vec2.ZERO,moveSpeed:{default:200,type:cc.Integer},_time:0,_range:cc.p(0,0),_acc:cc.p(0,0)},onLoad:function(){var t=cc.view.getVisibleSize();if(this._range.x=t.width/2-this.player.width/2,this._range.y=t.height/2-this.player.height/2,this.isMoving=!0,this.enableGravity)cc.systemEvent.setAccelerometerEnabled(!0),cc.systemEvent.on(cc.SystemEvent.EventType.DEVICEMOTION,this.onDeviceMotionEvent,this);else{var o=this;o.canvas.on(cc.Node.EventType.TOUCH_START,function(t){var e=t.getTouches()[0].getLocation();o.isMoving=!0,o.moveToPos=o.player.parent.convertToNodeSpaceAR(e),o.touchLocationDisplay.string="("+Math.floor(e.x)+", "+Math.floor(e.y)+")("+Math.floor(o.moveToPos.x)+", "+Math.floor(o.moveToPos.y)+")"},o.node),o.canvas.on(cc.Node.EventType.TOUCH_MOVE,function(t){var e=t.getTouches()[0].getLocation();o.moveToPos=o.player.parent.convertToNodeSpaceAR(e),o.touchLocationDisplay.string="("+Math.floor(e.x)+", "+Math.floor(e.y)+")("+Math.floor(o.moveToPos.x)+", "+Math.floor(o.moveToPos.y)+")"},o.node),o.canvas.on(cc.Node.EventType.TOUCH_END,function(t){o.isMoving=!1},o.node)}},start:function(){},movePlayer:function(t){if(this.isMoving){var e=this.player.position,o=cc.p(),n=cc.p();if(this.enableGravity){this._time+=5,o.x=e.x+this._acc.x*t*(this.moveSpeed+this._time),o.y=e.y+this._acc.y*t*(this.moveSpeed+this._time);var i=cc.pSub(o,e);if(cc.pLength(i)<3)return;n=cc.pNormalize(i)}else{var c=cc.pSub(this.moveToPos,e);if(cc.pLength(c)<3)return;n=cc.pNormalize(c),o=cc.pAdd(e,cc.pMult(n,this.moveSpeed*t))}var s=180*Math.atan2(n.x,n.y)/Math.PI;this.player.rotation=s;var a=this._range;o.x=cc.clampf(o.x,-a.x,a.x),o.y=cc.clampf(o.y,-a.y,a.y),(o.x<=-a.x||o.x>=a.x||o.y<=-a.y||o.y>=a.y)&&(this._time=0),this.player.setPosition(o)}},onDeviceMotionEvent:function(t){this._acc.x=t.acc.x,this._acc.y=t.acc.y},update:function(t){this.movePlayer(t)},onDestroy:function(){this.enableGravity&&cc.systemEvent.off(cc.SystemEvent.EventType.DEVICEMOTION,this.onDeviceMotionEvent,this)}}),cc._RF.pop()},{}],en:[function(t,e,o){"use strict";cc._RF.push(e,"e4ddc8a/vVFwY6n9VQQvxiE","en"),window.i18n||(window.i18n={}),window.i18n.languages||(window.i18n.languages={}),window.i18n.languages.en={},cc._RF.pop()},{}],global:[function(t,e,o){"use strict";cc._RF.push(e,"2acbeFK/3FIM6/79MJsQG7X","global"),window.D={common:null,commonInfo:null},cc._RF.pop()},{}],main:[function(t,e,o){"use strict";cc._RF.push(e,"bb5c1p9H9JP7bT+ApPoK9v5","main"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,c=n.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t}return __extends(t,e),t.prototype.start=function(){},__decorate([c(cc.Label)],t.prototype,"label",void 0),t=__decorate([i],t)}(cc.Component);o.default=s,cc._RF.pop()},{}],menu:[function(t,e,o){"use strict";cc._RF.push(e,"cbbefM2udNPX7Kb4wj50Spl","menu"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,c=n.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t.text="hello",t}return __extends(t,e),t.prototype.start=function(){cc.director.preloadScene("game",function(){cc.log("Game scene preloaded")})},t.prototype.test=function(){cc.director.loadScene("game")},__decorate([c(cc.Label)],t.prototype,"label",void 0),__decorate([c],t.prototype,"text",void 0),t=__decorate([i],t)}(cc.Component);o.default=s,cc._RF.pop()},{}],player:[function(t,e,o){"use strict";cc._RF.push(e,"c13fc1C+ahOU7xSEeNzlCVF","player"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,c=n.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t}return __extends(t,e),t.prototype.onLoad=function(){cc.director.getCollisionManager().enabled=!0},t.prototype.start=function(){},__decorate([c(cc.Label)],t.prototype,"label",void 0),t=__decorate([i],t)}(cc.Component);o.default=s,cc._RF.pop()},{}],"polyglot.min":[function(t,e,o){"use strict";cc._RF.push(e,"e26fd9yy65A4q3/JkpVnFYg","polyglot.min");var n,i,c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};n=void 0,i=function(e){function t(t){t=t||{},this.phrases={},this.extend(t.phrases||{}),this.currentLocale=t.locale||"en",this.allowMissing=!!t.allowMissing,this.warn=t.warn||o}function i(t,e,o){var n,i,c,s,a,r,p;return null!=o&&t?(c=(i=t.split(l))[(s=e,a=o,u[(r=s,p=function(t){var e,o,n,i={};for(e in t)if(t.hasOwnProperty(e))for(n in o=t[e])i[o[n]]=e;return i}(d),p[r]||p.en)](a))]||i[0],n=c.replace(/^\s+|\s+$/g,"")):n=t,n}function o(t){e.console&&e.console.warn&&e.console.warn("WARNING: "+t)}t.VERSION="0.4.3",t.prototype.locale=function(t){return t&&(this.currentLocale=t),this.currentLocale},t.prototype.extend=function(t,e){var o;for(var n in t)t.hasOwnProperty(n)&&(o=t[n],e&&(n=e+"."+n),"object"==(void 0===o?"undefined":c(o))?this.extend(o,n):this.phrases[n]=o)},t.prototype.clear=function(){this.phrases={}},t.prototype.replace=function(t){this.clear(),this.extend(t)},t.prototype.t=function(t,e){var o,n;return"number"==typeof(e=null==e?{}:e)&&(e={smart_count:e}),"string"==typeof this.phrases[t]?o=this.phrases[t]:"string"==typeof e._?o=e._:this.allowMissing?o=t:(this.warn('Missing translation for key: "'+t+'"'),n=t),"string"==typeof o&&(e=function(t){var e={};for(var o in t)e[o]=t[o];return e}(e),n=function(t,e){for(var o in e)"_"!==o&&e.hasOwnProperty(o)&&(t=t.replace(new RegExp("%\\{"+o+"\\}","g"),e[o]));return t}(n=i(o,this.currentLocale,e.smart_count),e)),n},t.prototype.has=function(t){return t in this.phrases};var l="||||",u={chinese:function(t){return 0},german:function(t){return 1!==t?1:0},french:function(t){return 1<t?1:0},russian:function(t){return t%10==1&&t%100!=11?0:2<=t%10&&t%10<=4&&(t%100<10||20<=t%100)?1:2},czech:function(t){return 1===t?0:2<=t&&t<=4?1:2},polish:function(t){return 1===t?0:2<=t%10&&t%10<=4&&(t%100<10||20<=t%100)?1:2},icelandic:function(t){return t%10!=1||t%100==11?1:0}},d={chinese:["fa","id","ja","ko","lo","ms","th","tr","zh"],german:["da","de","en","es","fi","el","he","hu","it","nl","no","pt","sv"],french:["fr","tl","pt-br"],russian:["hr","ru"],czech:["cs"],polish:["pl"],icelandic:["is"]};return t},"function"==typeof define&&define.amd?define([],function(){return i(n)}):"object"==(void 0===o?"undefined":c(o))?e.exports=i(n):n.Polyglot=i(n),cc._RF.pop()},{}],setting:[function(t,e,o){"use strict";cc._RF.push(e,"61ee5T8IIVORqDemqwaecMU","setting"),cc.Class({extends:cc.Component,properties:{canvas:{type:cc.Node,default:null}},start:function(){},setScreen:function(){cc.screen.fullScreen()?this.exitFullScreen():this.requestFullScreen()},requestFullScreen:function(){cc.screen.requestFullScreen(this.canvas.getComponent("canvas"))},exitFullScreen:function(){cc.screen.exitFullScreen()},backStart:function(){cc.director.loadScene("start",function(){console.log("Start menu is loaded.")})}}),cc._RF.pop()},{}],start:[function(t,e,o){"use strict";cc._RF.push(e,"69862RCK4lIOakuWgV4sGm0","start"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,c=(n.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.onLoad=function(){cc.view.enableAutoFullScreen(!0)},e.prototype.onFullScreenChange=function(){console.log("Request Full Screen success!")},e.prototype.startGame=function(){cc.director.loadScene("menu",function(){console.log("Menu is loaded.")})},e.prototype.settingMenu=function(){cc.director.loadScene("setting",function(){console.log("Setting menu is loaded.")})},e=__decorate([i],e)}(cc.Component));o.default=c,cc._RF.pop()},{}],zh:[function(t,e,o){"use strict";cc._RF.push(e,"ec922g5eNBOwqDl8nSECXnf","zh"),window.i18n||(window.i18n={}),window.i18n.languages||(window.i18n.languages={}),window.i18n.languages.zh={label_text:{hello:"你好！",bye:"再见！"}},cc._RF.pop()},{}]},{},["LanguageData","LocalizedLabel","LocalizedSprite","SpriteFrameSet","polyglot.min","bulletGroup","common","control","Joystick","JoystickBG","JoystickCommon","global","main","menu","player","setting","start","en","zh"]);